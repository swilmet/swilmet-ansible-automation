# SPDX-FileCopyrightText: 2019-2020 SÃ©bastien Wilmet <sebastien.wilmet@gmail.com>
# SPDX-License-Identifier: GPL-3.0-or-later
---
# For the belgian identity card.
# It follows these instructions for Fedora:
# https://eid.belgium.be/en/linux-eid-software-installation
# I really wonder how it will work with Silverblue and Flatpak, for the
# integration in web browsers.

- when: ansible_facts['distribution'] == "Fedora" and
        (ansible_facts['distribution_major_version'] == "32" or
         ansible_facts['distribution_major_version'] == "33")
  block:
    - name: install the eID-archive package, enabling the eID package repositories
      dnf:
        name: 'https://eid.belgium.be/sites/default/files/software/eid-archive-fedora-2016-2.noarch.rpm'
        state: present
        disable_gpg_check: yes

    - name: install eid-viewer
      package: name=eid-viewer state=present
